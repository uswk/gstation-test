switch(<%= @ajaxflg %>){
  case -1:
    alert("登録処理に失敗しました。再度やり直してください。");
    break;
  case -2:
    $('#modal').dialog( "close" );
    //初期化
    document.getElementById("latitude_new_").value = object.latLng.lat();
    document.getElementById("longitude_new_").value = object.latLng.lng();
    break;
  case -5:
    alert("管理者が存在しません。再度やり直してください。");
    break;
  case 1:
    break;
  case 2:
    var cust_code = "<%= @custcode %>";
    var cust_name = document.getElementById("cust_name_new_").value;
    var address = document.getElementById("address_new_").value;
    var latitude = document.getElementById("latitude_new_").value;
    var longitude = document.getElementById("longitude_new_").value;
    var admin_code = document.getElementById("admin_code_new_").value;
    var admin_name = "<%= @admin_name %>";
    var admin_tel = "<%= @admin_tel %>";
    var admin_email = "<%= @admin_email %>";
    
    if (document.getElementById("route_new_").checked){
      froute_add(cust_code, cust_name, "", latitude, longitude, admin_name, admin_tel, admin_email, 2)
    }else{
      //マーカー再表示
      f_marker_dsp();
    }
    $('#modal').dialog( "close" );
    //初期化
    document.getElementById("latitude_new_").value = object.latLng.lat();
    document.getElementById("longitude_new_").value = object.latLng.lng();
    break;
  case 3:
    break;
  case 4:
    var cust_kbn;
    var cust_code;
    var cust_name;
    var cust_addr;
    var admin_name;
    var admin_tel;
    var admin_email;
    var type_value;
    var marker_color;
    var route_memo;
    var id;
    var latitude;
    var longitude;
    var bgcolor;
    var seq_id = 0;
    var contentString;
    var icon;
    var myLatlng;
    var infowindow = new Array();

    //マーカー初期化（念の為）
    for(var i = 0; i < marker.length; i++){
      marker[i].setMap(null);
    }
    for(var i = 0; i < treeMarker.length; i++){
      treeMarker[i].setMap(null);
    }
<%
  if not @m_customs.nil?
    @m_customs.each do |custom|
%>
      cust_kbn = "<%= custom.cust_kbn %>";
      cust_code = "<%= custom.cust_code %>";
      cust_name = "<%= custom.cust_name %>";
      cust_addr = "<%= (custom.addr_1.to_s + ' ' + custom.addr_2.to_s).strip %>";
      admin_name = "<%= custom.admin_name %>";
      admin_tel = "<%= custom.admin_tel %>";
      admin_email = "<%= custom.admin_email %>";
      type_value = "<%= custom.type_value %>";
      marker_color = "<%= custom.marker_color %>";
      id = "<%= custom.id %>";
      latitude = "<%= custom.latitude %>";
      longitude = "<%= custom.longitude %>";
      bgcolor = "<%= custom.bgcolor.to_s %>";
      
      myLatlng = new google.maps.LatLng(latitude,longitude);
      var elementid = "delete_form"+id;
      contentString = "<div style='width:450px; height:160px;'><h3>" + cust_code + ":" + cust_name + "</h3>" + cust_addr + "<br><br>管理者名：" + admin_name + "<br>電話番号：" + admin_tel;
      contentString = contentString + "<br><br><input type=button value='メモ' onclick=fcustom_memo_common('" + cust_code + "','<%= root_url(only_path: false) %>'); class='btn'>&nbsp;&nbsp;";
      contentString = contentString + "&nbsp;&nbsp;<input type=button value='収集履歴' onclick=fcustom_carrun_common('" + cust_kbn + "','" + cust_code + "','<%= root_url(only_path: false) %>'); class='btn'>&nbsp;&nbsp;";
      contentString = contentString + "&nbsp;&nbsp;<input type=button value='詳細' onclick=fcustom_detail_common('" + id + "','<%= root_url(only_path: false) %>',''); class='btn'>&nbsp;&nbsp;";
      contentString = contentString + "&nbsp;&nbsp;<input type=button value='編集' onclick=fcustom_detail_common('" + id + "','<%= root_url(only_path: false) %>','/edit'); class='btn'>&nbsp;&nbsp;";
      contentString = contentString + "&nbsp;&nbsp;<a href='m_customs/" + id + "?zoom_del="+ map.zoom + "&lat_del=" + map.getCenter().lat() + "&lng_del=" + map.getCenter().lng() + "' data-confirm='削除しますがよろしいですか?' data-method='delete' rel='nofollow' class='btn btn-danger' style='text-decoration:none;'>削除</a></div>";

      if(marker_color){
        icon = "images/" + marker_color;
      }else if(type_value){
        icon = "images/" + type_value;
      }else{
        icon = "images/marker_icon_normal.png";
      }
      if(bgcolor){
        icon = "images/marker_icon_del.png";
      }

      infowindow[seq_id] = new google.maps.InfoWindow({
        content: contentString,
        disableAutoPan: true
      });
      marker[seq_id] = new google.maps.Marker({
        position: myLatlng,
        icon: icon,
        map: map,
        title: ""+seq_id
      });
      google.maps.event.addListener(marker[seq_id], 'click', function() {
        //情報ウィンドウ閉じる
        for(var i = 0; i < seq_id; i++){
          infowindow[i].close();
        }
        infowindow[this.getTitle()].open(map,marker[this.getTitle()]);
      });
      
      
      seq_id += 1;
<%
    end
  end
%>
    //中央の位置にマーカー表示
    myLatlng = new google.maps.LatLng(map.getBounds().getCenter().lat(),map.getBounds().getCenter().lng())
    icon = {
      url: "images/marker_pin.png",
      origin: new google.maps.Point(0, 0),
      anchor: new google.maps.Point(5, 40)
    };
    marker[seq_id] = new google.maps.Marker({
      position: myLatlng,
      icon: icon,
      map: map,
      title: ""+seq_id
    });
    $('#layer').hide();
    break;
  case 5:
    document.getElementById("div_admin_name").innerHTML = "<%= @cust_name %>";
    document.getElementById("div_admin_type").innerHTML = "<%= @admin_type %>";
    document.getElementById("chg_flg_new_").value = 1;
    break;
  case 6:
    document.getElementById("cust_name_new_").value = "<%= @cust_name_chg %>";
    document.getElementById("chg_flg_new_").value = 1;
    break;
}
