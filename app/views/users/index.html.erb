<h1>ユーザー一覧画面</h1>

<table>
  <thead>
    <tr>
      <td>
        <%= form_tag("users", method: "get") do %>
          ユーザーID ： <%= text_field 'search', 'query', :value => params[:search].nil? ? "" : params[:search][:query]  %>
          <%= submit_tag "検索", :class => 'btn btn-light' %>
        <% end %>
      </td>
    </tr>
  </thead>
</table>
<br>

<%= paginate(@users) %>
<table>
  <thead>
    <tr>
      <th>ユーザーID</th>
      <th>ユーザー名</th>
      <th>委託会社</th>
      <th></th>
      <% if current_user.authority == 1 %>
        <th></th>
        <th></th>
      <% end %>
    </tr>
  </thead>
  <div class="form-actions">
    <% if current_user.authority==1 %>
      <%= button_to '追加', new_user_path, {method: :get, :class => 'btn btn-primary'} %>
    <% end %>
  </div>
  <br>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.user_id %></td>
        <td><%= user.user_name %></td>
        <td><%= user.itaku_name %></td>
        <td><%= link_to '詳細', user, :class => 'btn btn-light btn-sm' %></td>
        <% if current_user.authority == 1 %>
          <td><%= link_to '編集', edit_user_path(user), :class => 'btn btn-light btn-sm' %></td>
          <td><%= link_to '削除', user, method: :delete, data: { confirm: '削除しますがよろしいですか?' }, :style=>"color:white;", :class => 'btn btn-sm btn-danger' %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
